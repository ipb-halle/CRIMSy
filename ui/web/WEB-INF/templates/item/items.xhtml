<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~     Leibniz Bioactives Cloud
  ~     Copyright 2017 Leibniz-Institut f. Pflanzenbiochemie
  ~
  ~     Licensed under the Apache License, Version 2.0 (the "License");
  ~     you may not use this file except in compliance with the License.
  ~     You may obtain a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~     Unless required by applicable law or agreed to in writing, software
  ~     distributed under the License is distributed on an "AS IS" BASIS,
  ~     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~     See the License for the specific language governing permissions and
  ~     limitations under the License.
  ~
  ~
  ~
-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:nwc="http://ipb-halle.de/nwc"
      xmlns:p="http://primefaces.org/ui"
      xmlns:crimsy="http://xmlns.jcp.org/jsf/composite/crimsy">
    <h:body>

        <crimsy:acobjectModal
            acobjectController="#{itemOverviewBean.acObjectController}"
            groupsAgent="#{groupAgent}"
            updateTargetClass="itemOverviewContainer"/>
        <b:form 
            id="itemForm">
            <b:container 
                id="itemOverviewContainerId"
                styleClass="itemOverviewContainer">
                <b:row>
                    <b:column span="2"> 
                        <b:container>
                            <b:row>
                                <b:column>
                                    <h:outputText value="Suchfilter"
                                                  styleClass="searchFilterHeader"/>
                                </b:column>
                            </b:row>    
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <h:outputText value="Materialname"
                                                  />
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <p:autoComplete value="#{itemOverviewBean.searchMaskValues.materialName}"
                                                    maxResults="10"
                                                    completeMethod="#{itemOverviewBean.getSimilarMaterialNames}"
                                                    styleClass="itemFilterInputfield"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <h:outputText value="Gebindenummer"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <b:inputText
                                        value="#{itemOverviewBean.searchMaskValues.itemId}"
                                        styleClass="itemFilterInputfield"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <h:outputText value="User"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <p:autoComplete value="#{itemOverviewBean.searchMaskValues.userName}"
                                                    maxResults="10"
                                                    completeMethod="#{itemOverviewBean.getSimilarUserNames}"
                                                    styleClass="itemFilterInputfield"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <h:outputText value="Project"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <p:autoComplete value="#{itemOverviewBean.searchMaskValues.projectName}"
                                                    maxResults="10"
                                                    completeMethod="#{itemOverviewBean.getSimilarProjectNames}"
                                                    styleClass="itemFilterInputfield"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <h:outputText value="Standort"/>
                                </b:column>
                            </b:row>  
                            <b:row
                                styleClass="itemFilterRow">  
                                <b:column span="2">
                                    <p:autoComplete value="#{itemOverviewBean.searchMaskValues.location}"
                                                    maxResults="10"
                                                    forceSelection="true"
                                                    completeMethod="#{itemOverviewBean.getSimilarContainerNames}"
                                                    styleClass="itemFilterInputfield"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <h:outputText value="Bemerkungen"/>
                                </b:column>
                            </b:row>
                            <b:row
                                styleClass="itemFilterRow">
                                <b:column span="2">
                                    <b:inputText value="#{itemOverviewBean.searchMaskValues.description}"
                                                 styleClass="itemFilterInputfield"/>
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:column
                                    span="1" 
                                    styleClass="itemFilterButtonColumn">
                                    <b:commandButton 
                                        styleClass="itemFilterButton"
                                        value="Clear"
                                        ajax="true"
                                        update="itemForm"
                                        onclick="ajax:itemOverviewBean.actionClearSearchFilter();"/>
                                </b:column>
                                <b:column
                                    span="1"
                                    styleClass="itemFilterButtonColumn itemFilterButtonRight">
                                    <b:commandButton 
                                        styleClass="itemFilterButton"
                                        value="Search"
                                        update="itemForm"
                                        ajax="true"
                                        onclick="ajax:itemOverviewBean.actionApplySearchFilter();"/>
                                </b:column>
                            </b:row>
                        </b:container>
                    </b:column>    
                    <b:column span="10">  
                        <b:container styleClass="itemOverviewTableContainer">
                            <b:row>
                                <b:column span="12"
                                          styleClass="itemDataTable">
                                    <b:dataTable
                                        paginated="false"
                                        value="#{itemOverviewBean.items}"
                                        searching="false"
                                        var="item">
                                        <b:dataTableColumn
                                            label="Label">
                                            <h:outputText
                                                id="itemLabel"
                                                escape="false"
                                                value="#{item.getLabel()}">
                                            </h:outputText>
                                            <p:tooltip for="itemLabel"  position="right">
                                                <h:outputText 
                                                    escape="false"
                                                    value="#{itemOverviewBean. getItemId(item)}" >
                                                    <f:converter converterId="RichTextConverter" />
                                                </h:outputText>
                                            </p:tooltip>
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.itemOverview_tableheader_material}">
                                            <h:outputText
                                                id="materialNames"
                                                escape="false"
                                                value="#{itemOverviewBean. getWrappedNames(item, 3)}">
                                                <f:converter converterId="RichTextConverter" />
                                            </h:outputText>
                                            <p:tooltip for="materialNames"  position="right">
                                                <h:outputText 
                                                    escape="false"
                                                    value="#{itemOverviewBean. getWrappedNames(item, 20)}" >
                                                    <f:converter converterId="RichTextConverter" />
                                                </h:outputText>

                                            </p:tooltip>
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.itemOverview_tableheader_projectOwner}"
                                            value="#{itemOverviewBean.getOwnerString(item)}">
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.itemOverview_tableheader_amount}"
                                            value="#{itemOverviewBean.getAmountString(item)}">
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.itemOverview_tableheader_location}"
                                            value="#{itemOverviewBean.getLocationOfItem(item)}">
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.itemOverview_tableheader_remarks}"
                                            value="#{item.getDescription()}">
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.itemOverview_tableheader_dates}">
                                            <h:outputText
                                                escape="false"
                                                value="#{itemOverviewBean.getDatesOfItem(item)}">
                                                <f:converter converterId="RichTextConverter" />
                                            </h:outputText>
                                        </b:dataTableColumn>
                                        <b:dataTableColumn
                                            label="#{msgs.materialOverview_tableheader_actions}">
                                            <b:commandButton style="padding: 0 4px;"
                                                             icon="pencil"
                                                             look="link"
                                                             type="submit"
                                                             ajax="false"
                                                             action="#{itemOverviewBean.actionStartItemEdit(item)}"
                                                             />
                                            <b:commandButton style="padding: 0 4px;"
                                                             icon="glyphicon glyphicon-user"
                                                             look="link"
                                                             ajax="true"
                                                             process="@this"
                                                             tooltip="#{msgs.collMgr_tooltip_changeUserPermission}"
                                                             update="@(.acoEditModal)"
                                                             type="button"
                                                             onclick="ajax:itemOverviewBean.actionStartAclChange(item)"
                                                             oncomplete="PF('dlgAcl').show();"
                                                             disabled="false"/>
                                        </b:dataTableColumn>
                                    </b:dataTable>
                                </b:column> 
                            </b:row>
                            <b:row>
                                <b:column span="1" styleClass="itemNavigationColumn"> 
                                    <b:commandButton 
                                        styleClass="itemNavigationButton"
                                        disabled="#{itemOverviewBean.isBackDeactivated()}"
                                        onclick="ajax:itemOverviewBean.actionFirstItems();"
                                        icon-awesome="fa-fast-backward"
                                        ajax="true"
                                        update="itemForm"
                                        />
                                </b:column>
                                <b:column span="1" styleClass="itemNavigationColumn"> 
                                    <b:commandButton 
                                        styleClass="itemNavigationButton"
                                        disabled="#{itemOverviewBean.isBackDeactivated()}"
                                        onclick="ajax:itemOverviewBean.actionLastItems();"
                                        ajax="true"
                                        update="itemForm"
                                        icon-awesome="fa-backward"/>
                                </b:column> 
                                <b:column span="1" styleClass="itemNavigationColumn"> 
                                    <b:commandButton 
                                        styleClass="itemNavigationButton"
                                        disabled="#{itemOverviewBean.isForwardDeactivated()}"
                                        onclick="ajax:itemOverviewBean.actionNextItems();"
                                        ajax="true"
                                        update="itemForm"
                                        icon-awesome="fa-forward"
                                        />
                                </b:column> 
                                <b:column span="1" styleClass="itemNavigationColumn"> 
                                    <b:commandButton 
                                        styleClass="itemNavigationButton"
                                        disabled="#{itemOverviewBean.isForwardDeactivated()}"
                                        onclick="ajax:itemOverviewBean.actionEndItems();"
                                        ajax="true"
                                        update="itemForm"
                                        icon-awesome="fa-fast-forward"
                                        />
                                </b:column> 
                                <b:column span="2" offset="1"> 
                                    <h:outputText value="#{itemOverviewBean.getItemNavigationInfo()}"/>
                                </b:column> 
                            </b:row>
                        </b:container>
                    </b:column> 
                </b:row>
            </b:container>








        </b:form>
    </h:body>

</html>
